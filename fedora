FROM fedora:latest
RUN dnf install -y make cmake git gcc-c++ gcc-gfortran flex patch doxygen pandoc python2 openmpi-devel exodusii-devel cereal-devel lapack-devel scotch-devel metis-devel environment-modules gasnet-devel python-pip doxygen clang ccache vim-enhanced
RUN dnf install -y exodusii-devel --enablerepo=updates-testing --best

RUN groupadd -r flecsi 
RUN useradd -r -m -g flecsi flecsi
USER flecsi
ENV PATH=/usr/lib64/ccache:${PATH}${PATH:+:}/usr/lib64/openmpi/bin/
ENV LD_LIBRARY_PATH=${LD_LIBRARY_PATH}${LD_LIBRARY_PATH:+:}/usr/lib64/openmpi/lib/
ENV MPI_INCLUDE=/usr/include/openmpi-x86_64
ENV MPI_LIB=/usr/lib64/openmpi/lib
WORKDIR /home/flecsi
RUN pip install --user codecov
