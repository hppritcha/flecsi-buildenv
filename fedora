FROM fedora:latest
#netcdf-devel can be dropped in the next version of exodusii-devel
RUN dnf install -y make cmake git gcc-c++ gcc-gfortran flex patch doxygen pandoc python2 openmpi-devel exodusii-devel netcdf-devel cereal-devel lapack-devel scotch-devel environment-modules gasnet-devel python-pip doxygen clang ccache

RUN groupadd -r flecsi 
RUN useradd -r -m -g flecsi flecsi
USER flecsi
ENV PATH=$PATH:/usr/lib64/openmpi/bin/
ENV LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/lib64/openmpi/lib/
WORKDIR /home/flecsi
RUN pip install --user codecov
